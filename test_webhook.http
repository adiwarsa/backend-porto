### Test Webhook Endpoints

# Test the webhook test endpoint - GET
GET {{base_url}}/api/webhook/test

###

# Test the webhook test endpoint - POST
POST {{base_url}}/api/webhook/test
Content-Type: application/json

{}

###

# Check authorization - GET (authorized number)
GET {{base_url}}/api/webhook/check-auth?number=6281234567890

###

# Check authorization - POST (authorized number)
POST {{base_url}}/api/webhook/check-auth
Content-Type: application/json

{
    "number": "6281234567890"
}

###

# Check authorization - GET (unauthorized number)
GET {{base_url}}/api/webhook/check-auth?number=6289999999999

###

# Check authorization - POST (unauthorized number)
POST {{base_url}}/api/webhook/check-auth
Content-Type: application/json

{
    "number": "6289999999999"
}

###

# Test message processing - GET
GET {{base_url}}/api/webhook/test-message?message=adi

###

# Test message processing - POST
POST {{base_url}}/api/webhook/test-message
Content-Type: application/json

{
    "message": "adi"
}

###

# Test Fonnte webhook with GET method (authorized number)
GET {{base_url}}/api/webhook/fonnte?device=test-device&sender=6281234567890&message=adi

###

# Test Fonnte webhook with POST method (authorized number)
POST {{base_url}}/api/webhook/fonnte
Content-Type: application/json

{
    "device": "test-device",
    "sender": "6281234567890",
    "message": "adi"
}

###

# Test Fonnte webhook with GET method (unauthorized number - should be blocked)
GET {{base_url}}/api/webhook/fonnte?device=test-device&sender=6289999999999&message=adi

###

# Test Fonnte webhook with POST method (unauthorized number - should be blocked)
POST {{base_url}}/api/webhook/fonnte
Content-Type: application/json

{
    "device": "test-device",
    "sender": "6289999999999",
    "message": "adi"
}

###

# Test booking approval - BK001 (should succeed) - GET (authorized)
GET {{base_url}}/api/webhook/fonnte?sender=6281234567890&message=!approve BK001

###

# Test booking approval - BK001 (should succeed) - POST (authorized)
POST {{base_url}}/api/webhook/fonnte
Content-Type: application/json

{
    "sender": "6281234567890",
    "message": "!approve BK001"
}

###

# Test booking approval - BK002 (should succeed) - GET (authorized)
GET {{base_url}}/api/webhook/fonnte?sender=6289876543210&message=!approve BK002

###

# Test booking approval - BK002 (should succeed) - POST (authorized)
POST {{base_url}}/api/webhook/fonnte
Content-Type: application/json

{
    "sender": "6289876543210",
    "message": "!approve BK002"
}

###

# Test booking approval - BK003 (should fail - already approved) - GET (authorized)
GET {{base_url}}/api/webhook/fonnte?sender=6281122334455&message=!approve BK003

###

# Test booking approval - BK003 (should fail - already approved) - POST (authorized)
POST {{base_url}}/api/webhook/fonnte
Content-Type: application/json

{
    "sender": "6281122334455",
    "message": "!approve BK003"
}

###

# Test booking approval - BK999 (should fail - not found) - GET (authorized)
GET {{base_url}}/api/webhook/fonnte?sender=6281234567890&message=!approve BK999

###

# Test booking approval - BK999 (should fail - not found) - POST (authorized)
POST {{base_url}}/api/webhook/fonnte
Content-Type: application/json

{
    "sender": "6281234567890",
    "message": "!approve BK999"
}

###

# Test image message - GET (authorized)
GET {{base_url}}/api/webhook/fonnte?sender=6281234567890&message=image

###

# Test image message - POST (authorized)
POST {{base_url}}/api/webhook/fonnte
Content-Type: application/json

{
    "sender": "6281234567890",
    "message": "image"
}

###

# Test audio message - GET (authorized)
GET {{base_url}}/api/webhook/fonnte?sender=6281234567890&message=audio

###

# Test audio message - POST (authorized)
POST {{base_url}}/api/webhook/fonnte
Content-Type: application/json

{
    "sender": "6281234567890",
    "message": "audio"
}

###

# Test video message - GET (authorized)
GET {{base_url}}/api/webhook/fonnte?sender=6281234567890&message=video

###

# Test video message - POST (authorized)
POST {{base_url}}/api/webhook/fonnte
Content-Type: application/json

{
    "sender": "6281234567890",
    "message": "video"
}

###

# Test file message - GET (authorized)
GET {{base_url}}/api/webhook/fonnte?sender=6281234567890&message=file

###

# Test file message - POST (authorized)
POST {{base_url}}/api/webhook/fonnte
Content-Type: application/json

{
    "sender": "6281234567890",
    "message": "file"
}

###

# Test unknown message - GET (authorized)
GET {{base_url}}/api/webhook/fonnte?sender=6281234567890&message=unknown

###

# Test unknown message - POST (authorized)
POST {{base_url}}/api/webhook/fonnte
Content-Type: application/json

{
    "sender": "6281234567890",
    "message": "unknown"
}

###

# Test without sender (should not send reply) - GET
GET {{base_url}}/api/webhook/fonnte?message=adi

###

# Test without sender (should not send reply) - POST
POST {{base_url}}/api/webhook/fonnte
Content-Type: application/json

{
    "message": "adi"
}

### 